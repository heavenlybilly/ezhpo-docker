# The MySQL  Client configuration file.
#
# For explanations see
# http://dev.mysql.com/doc/mysql/en/server-system-variables.html

[mysql]

[mysqld]
# Общие параметры
sql-mode="STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION"
character-set-server=utf8
collation-server=utf8_general_ci

# InnoDB-оптимизация
innodb_buffer_pool_size = 8G           # Используем ~2/3 RAM
innodb_log_file_size = 512M            # Хорошо для больших дампов
innodb_log_buffer_size = 128M          # Уменьшает запись в лог во время импорта
innodb_file_per_table = 1              # Таблицы хранятся отдельно
innodb_flush_log_at_trx_commit = 2     # Улучшает скорость импорта (приемлемо для dev)
innodb_flush_method = O_DIRECT         # Повышает производительность (если поддерживается)
innodb_io_capacity = 1000              # Оптимизация для SSD
innodb_use_native_aio = 1              # Включить AIO (если работает стабильно на Mac)

# tmpdir — временные файлы лучше перенаправить в директорию с достаточным объемом
tmpdir = /tmp

# max_allowed_packet — особенно важно при больших вставках
max_allowed_packet = 512M

# Убираем ограничение на размер ibdata1 (если вдруг innodb_file_per_table отключится)
innodb_data_file_path = ibdata1:128M:autoextend

# Улучшение скорости импорта
bulk_insert_buffer_size = 512M
read_buffer_size = 8M
read_rnd_buffer_size = 16M
sort_buffer_size = 32M

# Если используешь utf8mb4 в дампе — лучше указать явно
collation-server = utf8mb4_unicode_ci
character-set-server = utf8mb4
